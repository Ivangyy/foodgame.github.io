function getRankInfo(i,t,e,a){var r=Number.MAX_VALUE;setDataForChef2(t,e,a),i.stirfry>0&&(r=t.stirfryVal>0?Math.min(r,t.stirfryVal/i.stirfry):0),r>=1&&i.boil>0&&(r=t.boilVal>0?Math.min(r,t.boilVal/i.boil):0),r>=1&&i.knife>0&&(r=t.knifeVal>0?Math.min(r,t.knifeVal/i.knife):0),r>=1&&i.fry>0&&(r=t.fryVal>0?Math.min(r,t.fryVal/i.fry):0),r>=1&&i.bake>0&&(r=t.bakeVal>0?Math.min(r,t.bakeVal/i.bake):0),r>=1&&i.steam>0&&(r=t.steamVal>0?Math.min(r,t.steamVal/i.steam):0);var n=new Object,l=0,o="-",s=0;return r!=Number.MAX_VALUE&&r>=1&&(r>=4?(l=.5,o="神",s=4):r>=3?(l=.3,o="特",s=3):r>=2?(l=.1,o="优",s=2):r>=1&&(l=0,o="可",s=1)),n.rankAddition=l,n.rankDisp=o,n.rankVal=s,n}function getSkillAddition(i,t,e){var a=0;for(var r in t){var n=!1;if(t[r].type.indexOf("水产料理售价")>=0){for(var l in i.materials)if("鱼塘"==i.materials[l].origin){n=!0;break}}else if(t[r].type.indexOf("面类料理售价")>=0){for(var l in i.materials)if("作坊"==i.materials[l].origin){n=!0;break}}else if(t[r].type.indexOf("肉类料理售价")>=0){for(var l in i.materials)if("牧场"==i.materials[l].origin||"鸡舍"==i.materials[l].origin||"猪圈"==i.materials[l].origin){n=!0;break}}else if(t[r].type.indexOf("蔬菜料理售价")>=0){for(var l in i.materials)if("菜棚"==i.materials[l].origin||"菜地"==i.materials[l].origin||"森林"==i.materials[l].origin){n=!0;break}}else t[r].type.indexOf("炒类料理售价")>=0?i.stirfry>0&&(n=!0):t[r].type.indexOf("煮类料理售价")>=0?i.boil>0&&(n=!0):t[r].type.indexOf("炸类料理售价")>=0?i.fry>0&&(n=!0):t[r].type.indexOf("切类料理售价")>=0?i.knife>0&&(n=!0):t[r].type.indexOf("烤类料理售价")>=0?i.bake>0&&(n=!0):t[r].type.indexOf("蒸类料理售价")>=0?i.steam>0&&(n=!0):t[r].type.indexOf("金币获得")>=0?n=!0:t[r].type.indexOf("营业收入")>=0&&(n=!0);n&&(a=a.add(t[r].addition))}return a}function getMaterialsAddition(i,t){var e=0;for(var a in i.materials)for(var r in t)if(i.materials[a].material==t[r].materialId&&t[r].addition){e=e.add(Number(t[r].addition));break}return e}function getAdditionDisp(i){return i?i.mul(100)+"%":""}function getRecipeQuantity(i,t,e){var a=1;0==e.DisableMultiCookbook&&(a=i.limitVal);for(var r in i.materials){var n=!1;for(var l in t)if(i.materials[r].material==t[l].materialId){if(n=!0,t[l].quantity){var o=Math.floor(t[l].quantity/i.materials[r].quantity);o<a&&(a=o);break}if(0===t[l].quantity)return 0}if(!n)return 0}return a<0?0:a}function getRecipeResult(i,t,e,a,r,n,l,o){var s=new Object,f=0,d=0,p=0,c=0,m=0;if(i){var u=getRankInfo(e,i,!0,t);if(0==u.rankVal)return null;if(0==l.DisableCookbookRank&&(f=u.rankAddition),s.rankVal=u.rankVal,s.rankDisp=u.rankDisp,s.rankAddition=f,s.rankAdditionDisp=getAdditionDisp(f),0==l.DisableChefSkillEffect&&(d=getSkillAddition(e,i.specialSkillEffect,n)),s.chefSkillAddition=d,s.chefSkillAdditionDisp=getAdditionDisp(d),0==l.DisableEquipSkillEffect){var b=new Array;t&&(b=t.effect),p=getSkillAddition(e,b,n)}s.equipSkillAddition=p,s.equipSkillAdditionDisp=getAdditionDisp(p),m=m.add(Number(i.addition))}0==l.DisableDecorationEffect&&o&&(c=Number(o).div(100)),s.decorationAddition=c,s.decorationAdditionDisp=getAdditionDisp(c),m=m.add(Number(e.addition));var k=getMaterialsAddition(e,n);return m=m.add(k),s.data=e,s.quantity=a,s.max=r,s.limit=a,s.otherAddition=m,s.otherAdditionDisp=getAdditionDisp(m),s.totalPrice=e.price*a,s.realPrice=Math.ceil(e.price*(1+f+d+p+c+e.ultimateAddition)),s.totalRealPrice=s.realPrice*a,s.bonusScore=Math.ceil(e.price*m),s.totalBonusScore=s.bonusScore*a,s.totalScore=s.totalRealPrice+s.totalBonusScore,s}function getEquipInfo(i,t){var e=new Object;if(i)for(var a in t)if(i==t[a].name){e.name=t[a].name,e.effect=t[a].effect,e.disp=t[a].name+"<br><small>"+t[a].skillDisp+"</small>";break}return e}function setDataForChef2(i,t,e){i.stirfryVal=i.stirfry,i.boilVal=i.boil,i.knifeVal=i.knife,i.fryVal=i.fry,i.bakeVal=i.bake,i.steamVal=i.steam,i.stirfryDisp=i.stirfry||"",i.boilDisp=i.boil||"",i.knifeDisp=i.knife||"",i.fryDisp=i.fry||"",i.bakeDisp=i.bake||"",i.steamDisp=i.steam||"";var a=i.stirfryUltimateAddition,r=i.boilUltimateAddition,n=i.knifeUltimateAddition,l=i.fryUltimateAddition,o=i.bakeUltimateAddition,s=i.steamUltimateAddition;if(t&&e){var f=e.effect;for(var d in f){var p=f[d].type,c=f[d].addition;(p.indexOf("炒技法")>=0||p.indexOf("全技法")>=0)&&(a+=isInt(c)?c:i.stirfry*c),(p.indexOf("煮技法")>=0||p.indexOf("全技法")>=0)&&(r+=isInt(c)?c:i.boil*c),(p.indexOf("切技法")>=0||p.indexOf("全技法")>=0)&&(n+=isInt(c)?c:i.knife*c),(p.indexOf("炸技法")>=0||p.indexOf("全技法")>=0)&&(l+=isInt(c)?c:i.fry*c),(p.indexOf("烤技法")>=0||p.indexOf("全技法")>=0)&&(o+=isInt(c)?c:i.bake*c),(p.indexOf("蒸技法")>=0||p.indexOf("全技法")>=0)&&(s+=isInt(c)?c:i.steam*c)}}a&&(a=Math.ceil(a),i.stirfryVal+=a,i.stirfryDisp+="+"+a),r&&(r=Math.ceil(r),i.boilVal+=r,i.boilDisp+="+"+r),n&&(n=Math.ceil(n),i.knifeVal+=n,i.knifeDisp+="+"+n),l&&(l=Math.ceil(l),i.fryVal+=l,i.fryDisp+="+"+l),o&&(o=Math.ceil(o),i.bakeVal+=o,i.bakeDisp+="+"+o),s&&(s=Math.ceil(s),i.steamVal+=s,i.steamDisp+="+"+s),i.disp=i.name+"<br><small>";var m=0;i.stirfryDisp&&(i.disp+="炒"+i.stirfryDisp+" ",m++),i.boilDisp&&(i.disp+="煮"+i.boilDisp+" ",m++,m%2==0&&(i.disp+="<br>")),i.knifeDisp&&(i.disp+="切"+i.knifeDisp+" ",m++,m%2==0&&(i.disp+="<br>")),i.fryDisp&&(i.disp+="炸"+i.fryDisp+" ",m++,m%2==0&&(i.disp+="<br>")),i.bakeDisp&&(i.disp+="烤"+i.bakeDisp+" ",m++,m%2==0&&(i.disp+="<br>")),i.steamDisp&&(i.disp+="蒸"+i.steamDisp+" "),i.disp+="</small>"}function isInt(i){return i%1===0}function accAdd(i,t){isNaN(i)&&(i=0),isNaN(t)&&(t=0),i=Number(i),t=Number(t);var e,a,r,n;try{e=i.toString().split(".")[1].length}catch(i){e=0}try{a=t.toString().split(".")[1].length}catch(i){a=0}if(n=Math.abs(e-a),r=Math.pow(10,Math.max(e,a)),n>0){var l=Math.pow(10,n);e>a?(i=Number(i.toString().replace(".","")),t=Number(t.toString().replace(".",""))*l):(i=Number(i.toString().replace(".",""))*l,t=Number(t.toString().replace(".","")))}else i=Number(i.toString().replace(".","")),t=Number(t.toString().replace(".",""));return(i+t)/r}function accSub(i,t){isNaN(i)&&(i=0),isNaN(t)&&(t=0),i=Number(i),t=Number(t);var e,a,r,n;try{e=i.toString().split(".")[1].length}catch(i){e=0}try{a=t.toString().split(".")[1].length}catch(i){a=0}return r=Math.pow(10,Math.max(e,a)),n=e>=a?e:a,((i*r-t*r)/r).toFixed(n)}function accMul(i,t){isNaN(i)&&(i=0),isNaN(t)&&(t=0),i=Number(i),t=Number(t);var e=0,a=i.toString(),r=t.toString();try{e+=a.split(".")[1].length}catch(i){}try{e+=r.split(".")[1].length}catch(i){}return Number(a.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,e)}function accDiv(arg1,arg2){isNaN(arg1)&&(arg1=0),isNaN(arg2)&&(arg2=0),arg1=Number(arg1),arg2=Number(arg2);var t1=0,t2=0,r1,r2;try{t1=arg1.toString().split(".")[1].length}catch(i){}try{t2=arg2.toString().split(".")[1].length}catch(i){}with(Math)return r1=Number(arg1.toString().replace(".","")),r2=Number(arg2.toString().replace(".","")),r1/r2*pow(10,t2-t1)}Number.prototype.add=function(i){return accAdd(this,i)},Number.prototype.sub=function(i){return accSub(this,i)},Number.prototype.mul=function(i){return accMul(this,i)},Number.prototype.div=function(i){return accDiv(this,i)};